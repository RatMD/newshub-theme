(()=>{var f=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty;var c=(s,l)=>r(s,"name",{value:l,configurable:!0});var v=(s,l)=>()=>(l||s((l={exports:{}}).exports,l),l.exports);var x=(s,l,t,i)=>{if(l&&typeof l=="object"||typeof l=="function")for(let e of b(l))!y.call(s,e)&&e!==t&&r(s,e,{get:()=>l[e],enumerable:!(i=p(l,e))||i.enumerable});return s};var w=(s,l,t)=>(t=s!=null?f(m(s)):{},x(l||!s||!s.__esModule?r(t,"default",{value:s,enumerable:!0}):t,s));var u=v((n,h)=>{(function(s,l){typeof n=="object"&&typeof h!="undefined"?h.exports=l():typeof define=="function"&&define.amd?define("rat.Lightbox",l):(s=typeof globalThis!="undefined"?globalThis:s||self,s.rat=s.rat||{},s.rat.Lightbox=l())})(n,function(){"use strict";class s{constructor(t,i={}){this.items=new Map,this.events=new Map;let e=t.dataset.bsGallery||t.dataset.gallery||t;if(s.instances.has(e))throw new Error("An instance with the passed element or gallery has already been created.");s.instances.set(e,this),this.legacy=s.CAROUSEL.VERSION[0]==="4";let a=s.DEFAULTS;this.config={carousel:Object.assign({},a.carousel,i.carousel||{}),lightbox:Object.assign({},a.lightbox,i.lightbox||{}),modal:Object.assign({},a.modal,i.modal||{})},this.append(t),this.onKeyUpListener=this._onKeyUp.bind(this)}static get NAME(){return"lightbox"}static get VERSION(){return"1.1.0"}static get DEFAULTS(){return{carousel:{id:null,controls:!0,indicators:!1,interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},lightbox:{loader:!1,replacePictures:!1},modal:{id:null,backdrop:!0,focus:!0,keyboard:!0,size:"xl"}}}static get $(){let t=s._jquery||window.$||window.jQuery;if(!t)throw new Error("No jQuery object found, please use Lightbox.$ = <jQuery>.");return t}static set $(t){s._jquery=t}static get CAROUSEL(){let t=s._carousel||(window.bootstrap||window.Bootstrap||{}).Carousel;if(!t)throw new Error("No Bootstrap Carousel prototype found, please use Lightbox.CAROUSEL = <Bootstrap.Carousel>.");return t}static set CAROUSEL(t){s._carousel=t}static get MODAL(){let t=s._modal||(window.bootstrap||window.Bootstrap||{}).Modal;if(!t)throw new Error("No Bootstrap Modal prototype found, please use Lightbox.MODAL = <Bootstrap.Modal>.");return t}static set MODAL(t){s._modal=t}static get SELECTOR(){return'[data-toggle="lightbox"],[data-bs-toggle="lightbox"],[data-rat-lightbox]'}static invoke(t=null,i={}){return t=typeof t!="string"?this.SELECTOR:t,Array.from(document.querySelectorAll(t),e=>this.getOrCreateInstance(e,i))}static hasInstance(t){if(typeof t=="string")return this.instances.has(t);{let i=t.hasAttribute("data-bs-gallery")?t.dataset.bsGallery:t;return this.instances.has(i)}}static getInstance(t){if(typeof t=="string")return this.instances.has(t)?this.instances.get(t):null;{let i=t.dataset.bsGallery||t.dataset.gallery||t;return this.instances.has(i)?this.instances.get(i):null}}static getOrCreateInstance(t,i={}){let e=this.getInstance(t);return e===null?e=new this(t,i):e.append(t),e}_onKeyUp(t){t.key==="ArrowRight"?this.next():t.key==="ArrowLeft"&&this.prev()}_createLightbox(){let t="";this.config.carousel.controls&&this.items.size>1&&(t=`
                <button class="carousel-control-prev" type="button" data-${this.legacy?"":"bs-"}target="#${this.config.carousel.id||"lightboxCarousel"}" data-${this.legacy?"":"bs-"}slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="${this.legacy?"sr-only":"visually-hidden"}">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-${this.legacy?"":"bs-"}target="#${this.config.carousel.id||"lightboxCarousel"}" data-${this.legacy?"":"bs-"}slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="${this.legacy?"sr-only":"visually-hidden"}">Next</span>
                </button>
            `);let i="";this.config.carousel.indicators&&this.items.size>1&&(i=`
                <div class="carousel-indicators">
                    ${[...Array(this.items.size)].map((a,o)=>`<button type="button" data-${this.legacy?"":"bs-"}target="#${this.config.carousel.id||"lightboxCarousel"}" data-${this.legacy?"":"bs-"}slide-to="${o}" class="${o===0?"active":""}" aria-current="${o===0?"true":"false"}"></button>`).join(`
`)}
                </div>
            `);let e=document.createElement("DIV");e.className="modal modal-lightbox fade",e.tabIndex=-1,e.innerHTML=`
            <div id="${this.config.modal.id||"lightboxModal"}" class="modal-dialog${this.config.modal.size!==null?" modal-"+this.config.modal.size:" "} modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-body p-0">
                        <div id="${this.config.carousel.id||"lightboxCarousel"}" class="carousel carousel-fade slide">
                            ${i}

                            <div class="carousel-inner">
                                ${Array.from(this.items.values()).map((a,o)=>{let d=a.image instanceof HTMLImageElement?a.image.src:a.image.querySelector("img").src;return`
                                        <div class="carousel-item${o===0?" active":""}">
                                            ${this.config.lightbox.loader?`
                                                <div class="${this.legacy?"embed-responsive embed-responsive-16by9":"ratio ratio-16x9"}" data-img-src="${d}">
                                                    <div class="d-flex justify-content-center align-items-center embed-responsive-item">
                                                        <div class="spinner-border" role="status">
                                                            <span class="${this.legacy?"sr-only":"visually-hidden"}">Loading...</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            `:`
                                                ${a.image.outerHTML}
                                            `}
                                            
                                            ${a.caption||a.title?`
                                                <div class="carousel-caption d-none d-md-block">
                                                    ${a.title?`<div class="h5">${a.title}</div>`:""}
                                                    ${a.caption?`<p>${a.caption}</p>`:""}
                                                </div>
                                            `:""}
                                        </div>
                                    `}).join(`
`)}
                            </div>

                            ${t}
                        </div>
                    </div>
                </div>
            </div>
        `,this.lightbox=e}_createModal(){if(this.lightbox!==null)if(this.legacy){let t=Object.assign({},this.config.modal,{show:!1});this.modal=s.$(this.lightbox).modal(t)}else this.modal=s.MODAL.getOrCreateInstance(this.lightbox,this.config.modal)}_createCarousel(){if(this.lightbox!==null)if(this.legacy){let t=Object.assign({},this.config.carousel);t.ride||(t.interval=!1),this.carousel=s.$(this.lightbox.querySelector(".carousel")).carousel(t)}else this.carousel=s.CAROUSEL.getOrCreateInstance(this.lightbox.querySelector(".carousel"),this.config.carousel)}dispose(){return document.removeEventListener("keyup",this.onKeyUpListener),this.carousel&&(this.legacy?this.carousel.carousel("dispose"):this.carousel.dispose(),this.carousel=null),this.modal&&(this.legacy?this.modal.modal("dispose"):this.modal.dispose(),this.modal=null),this.lightbox&&this.lightbox.parentElement&&this.lightbox.remove(),this.lightbox=null,this}_getImage(t){return t instanceof HTMLImageElement||t instanceof HTMLPictureElement?t:t.querySelector("picture,img")}_getTitle(t,i){let e=t.dataset.bsTitle||t.dataset.title||t.title||null;return!e&&t!==i&&(e=i.dataset.bsTitle||i.dataset.title||null),e}_getCaption(t,i){if(t.tagName.toUpperCase()==="FIGURE"){let e=t.querySelector("FIGCAPTION");if(e&&e.innerText.trim().length>0)return e.innerText.trim()}else{let e=t.dataset.bsCaption||t.dataset.caption||null;return e||(e=i.dataset.bsCaption||i.dataset.caption||null),e}}append(t){if(this.items.has(t))return this;let i=this._getImage(t);if(i===null)throw new Error(`The passed element is not nor contains a supported image source. Element HTML: ${t.outerHTML}.`);let e=i.cloneNode(!0);return e.className="w-100",t instanceof HTMLAnchorElement&&t.href.length>0&&(e instanceof HTMLImageElement?e.src=t.href:e instanceof HTMLPictureElement&&this.config.lightbox.replacePictures&&(e.querySelector("img").src=t.href,Array.from(e.querySelectorAll("source"),a=>a.remove()))),this.items.set(t,{source:t,image:e,title:this._getTitle(t,e),caption:this._getCaption(t,e)}),t.setAttribute(this.legacy?"data-slide-to":"data-bs-slide-to",(this.items.size-1).toString()),t.addEventListener("click",a=>{a.preventDefault(),this.show(t)}),this}toggle(){return this.lightbox?this.hide():this.show()}show(t=null){if(this.lightbox)return this;if(this._createLightbox(),this._createModal(),this._createCarousel(),this.legacy){let e=["slid.bs.carousel","slide.bs.carousel","hide.bs.modal","hidden.bs.modal","hidePrevented.bs.modal","show.bs.modal","shown.bs.modal"];for(let a of e)(a.endsWith("modal")?this.modal:this.carousel).on(a,o=>{(a.endsWith("modal")?this.lightbox:this.lightbox.querySelector(".carousel")).dispatchEvent(new Event(a,{bubbles:o.bubbles,cancelable:o.cancelable,composed:o.composed}))})}t instanceof HTMLElement&&(t.dataset.bsSlideTo||t.dataset.slideTo)&&this.lightbox.addEventListener("show.bs.modal",e=>{let a=parseInt(t.dataset.bsSlideTo||t.dataset.slideTo,10);this.legacy?this.carousel.carousel(a):this.carousel.to(a)}),this.config.lightbox.loader&&this.lightbox.addEventListener("show.bs.modal",e=>{Array.from(this.lightbox.querySelectorAll("[data-img-src]"),a=>{let o=document.createElement("IMG");o.className="w-100",o.onload=d=>{a.replaceWith(o)},o.src=a.dataset.imgSrc})});let i=this.lightbox.querySelector(".carousel");for(let[e,a]of this.events.entries())e.endsWith("modal")&&a.forEach(o=>this.lightbox.addEventListener(e,o)),e.endsWith("carousel")&&a.forEach(o=>i.addEventListener(e,o));return this.config.carousel.keyboard&&document.addEventListener("keyup",this.onKeyUpListener),this.lightbox.addEventListener("hidden.bs.modal",this.dispose.bind(this)),this.legacy?this.modal.modal("show"):this.modal.show(),this}hide(){return this.modal&&(this.legacy?this.modal.modal("hide"):this.modal.hide()),this}cycle(){return this.carousel&&(this.legacy?this.carousel.carousel("cycle"):this.carousel.cycle()),this}next(){return this.carousel&&(this.legacy?this.carousel.carousel("next"):this.carousel.next()),this}prev(){return this.carousel&&(this.legacy?this.carousel.carousel("prev"):this.carousel.prev()),this}to(t){return this.carousel?(t==="prev"||t==="previous"?this.prev():t==="next"?this.next():this.legacy?this.carousel.carousel(t):this.carousel.to(t),this):this}on(t,i){return this.events.has(t)||this.events.set(t,new Set),this.events.get(t).add(i),this}off(t,i){return this.events.has(t)&&this.events.get(t).delete(i),this.lightbox&&t.endsWith("modal")&&this.lightbox.removeEventListener(t,i),this.lightbox&&t.endsWith("carousel")&&this.lightbox.querySelector(".carousel").removeEventListener(t,i),this}}return c(s,"Lightbox"),s._jquery=null,s._carousel=null,s._modal=null,s.instances=new Map,s})});var g=w(u());window.rat=window.rat||{};window.rat.Lightbox=g.default;})();
/*! Bundled license information:

@rat.md/bs-lightbox/dist/js/rat.lightbox.js:
  (*!
  |  @rat.md/bs-lightbox - A simple Bootstrap 4 and Bootstrap 5 Lightbox system using the native Carousel and Modal components.
  |  @file       dist/js/rat.lightbox.js
  |  @version    1.1.0
  |  @author     Sam <sam@rat.md> (https://rat.md)
  |  
  |  @website    https://github.com/RatMD/bs-lightbox
  |  @license    MIT License
  |  @copyright  Copyright © 2021 - 2022 rat.md <info@rat.md>
  *)
*/
//# sourceMappingURL=bootstrap-lightbox.min.js.map
